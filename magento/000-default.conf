<VirtualHost *:80>
    # ServerAdmin webmaster@boxo.neotiq.com
    ServerName vps.packrette.fr
    Redirect permanent / https://vps.packrette.fr
#    DocumentRoot /var/www/html/pub

#    <Directory /var/www/html/pub>
#        Options Indexes FollowSymLinks
#        AllowOverride All
#        Require all granted
#    </Directory>

    # Proxy requests for /api to the API server
#    ProxyPass "/boxo_api" "http://vps.packrette.fr:8082/"
 #   ProxyPassReverse "/boxo_api" "http://vps.packrette.fr:8082/"

 #   Alias "/boxo-frontend" "/var/www/html/pub/build"
 #   <Directory "/var/www/html/pub/build">
 #       Options Indexes FollowSymLinks
 #       AllowOverride All
 #       Require all granted
 #   </Directory>


 #  ErrorLog ${APACHE_LOG_DIR}/error.log
 #   CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

<VirtualHost *:443>
 
  ServerAdmin webmaster@boxo.neotiq.com
  ServerName vps.packrette.fr
    DocumentRoot /var/www/html/pub

    <Directory /var/www/html/pub>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ProxyPreserveHost On

    # Proxy requests for /api to the API server
    ProxyPass "/boxo_api" "http://0.0.0.0:8082/"
    ProxyPassReverse "/boxo_api" "http://0.0.0.0:8082/"

    ProxyPass /boxo-frontend "http://0.0.0.0:8081/"
    ProxyPassReverse /boxo-frontend "http://0.0.0.0:8081/"

    # Alias "/boxo-frontend" "/var/www/html/pub/build"
    # <Directory "/var/www/html/pub/build">
    #     Options Indexes FollowSymLinks
	# AllowOverride All
    #     Require all granted
    # </Directory>

#  ServerAdmin admin@localhost
#  DocumentRoot /var/www/html
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

SSLEngine on

    SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
    SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key
      <FilesMatch "\.(cgi|shtml|phtml|php)$">
                    SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory /usr/lib/cgi-bin>
                    SSLOptions +StdEnvVars
    </Directory>

</VirtualHost>
